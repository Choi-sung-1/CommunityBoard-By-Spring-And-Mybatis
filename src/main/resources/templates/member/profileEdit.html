<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="ko">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>마이페이지 수정</title>
    <link th:href="@{/css/bootstrap.min.css}" rel="stylesheet" />
    <link rel="stylesheet" th:href="@{/css/member/profileEdit.css}">
</head>
<body>

<div class="card">
    <div class="card-header">
        👥 마이페이지 수정
    </div>
    <div class="card-body text-center">
        <form method="post" enctype="multipart/form-data"
              th:action="@{/member/profile/edit/{memberId}(memberId=${memberId})}"
              th:object="${memberProfile}">

            <!-- 프로필 이미지 -->
            <div class="mb-4 text-center">
                <img th:src="${filePath}" src="첨부 이미지" alt="프로필 이미지"
                     id="profileImage" class="img-preview mb-2" />
                <div class="mt-3" id="previewCard" style="display:none;">
                    <img id="preview" src="" alt="미리보기 이미지" class="img-preview d-block mx-auto" />
                </div>
                <input class="form-control mt-2" type="file" name="profileImage" id="pfImage" accept="image/*" onchange="previewImage(event)" />
            </div>

            <!-- 한줄 소개 -->
            <div class="form-floating mb-3">
                <input type="text" id="profileOneLineBio" name="profileOneLineBio"
                       th:value="*{profileOneLineBio}" class="form-control" placeholder="한줄 소개" />
                <label for="profileOneLineBio">한줄 소개</label>
            </div>

            <!-- 이름 -->
            <div class="form-floating mb-3">
                <input type="text" th:field="*{memberName}" class="form-control" id="memberName" placeholder="이름"/>
                <label for="memberName">이름</label>
                <div class="field-error" id="nameError"></div>
            </div>

            <!-- 아이디 -->
            <div class="form-floating mb-3">
                <input type="text" th:field="*{memberLoginId}" class="form-control" readonly placeholder="아이디"/>
                <label>아이디</label>
            </div>

            <!-- 이메일 -->
            <div class="form-floating mb-3">
                <input type="email" id="memberEmail" th:field="*{memberEmail}" class="form-control" placeholder="이메일" />
                <label for="memberEmail">이메일</label>
                <div class="field-error" id="emailError"></div>
            </div>

            <!-- 생년월일 -->
            <div class="form-floating mb-3">
                <input type="text" th:value="*{memberBirth}" class="form-control" readonly placeholder="생년월일"/>
                <label>생년월일</label>
            </div>

            <!-- 전화번호 -->
            <div class="form-floating mb-3">
                <input type="text" id="memberPhone" th:field="*{memberPhone}" class="form-control" placeholder="010-1234-5678" />
                <label for="memberPhone">전화번호</label>
                <div class="field-error" id="phoneError"></div>
            </div>

            <!-- 버튼 -->
            <div class="d-flex justify-content-between mt-4">
                <button type="button" class="btn btn-outline-secondary btn-custom w-50 me-2" onclick="history.back()">← 취소</button>
                <button type="submit" class="btn btn-primary btn-custom w-50">수정하기</button>
            </div>

        </form>
    </div>
</div>

<script th:src="@{/js/member/profileEdit.js}"></script>

</body>
</html>
