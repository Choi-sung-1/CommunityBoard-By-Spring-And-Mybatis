<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="utf-8">
    <title>ê²Œì‹œê¸€ ì‘ì„±</title>
    <link th:href="@{/css/bootstrap.min.css}" href="/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
<div>
    <h2>ğŸ“ ê²Œì‹œê¸€ ì‘ì„±</h2>

    <h4 th:if="${loginMember == null}" >ë¡œê·¸ì¸ í›„ ì´ìš©í•´ì£¼ì„¸ìš”.</h4>
    <h4 th:if="${loginMember != null}" th:text="|ë¡œê·¸ì¸ ì‚¬ìš©ì : ${loginMember.memberLoginId}|">ë¡œê·¸ì¸ ì‚¬ìš©ì</h4>
    <form id="postForm" name="postForm" method="post" th:object="${postVO}" enctype="multipart/form-data">
        <!-- ì œëª© -->
        <div>
            <label for="postTitle">ì œëª©</label>
            <input th:field="*{postTitle}" type="text" id="postTitle" class="form-control" placeholder="ì œëª©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.">
        </div>
        <!-- ì´ë¯¸ì§€ ì—…ë¡œë“œ -->
        <div >
            <label for="imageInput">ì´ë¯¸ì§€ ì²¨ë¶€</label>
            <input type="file" id="imageInput" name="imageFiles" accept="image/*" multiple onchange="previewImages(event)">
            <div id="previewCard"></div>

        </div>
        <!-- ë‚´ìš© -->
        <div class="form-group">
            <label for="postContent">ë‚´ìš©</label>
            <div>
            <textarea id="postContent" rows="6" th:field="*{postContent}"
                      placeholder="ë‚´ìš©ì„ 2ê¸€ì ì´ìƒ ì…ë ¥í•´ì£¼ì„¸ìš”."></textarea>
            </div>

        </div>
        <hr class="my-4">
        <!-- ë²„íŠ¼ ì˜ì—­ -->
        <div>
            <div>
                <button type="submit" id="submitButton">ì‘ì„±í•˜ê¸°</button>
            </div>
            <div>
                <a href="#" th:href="@{/post/list}">ëª©ë¡ìœ¼ë¡œ</a>
            </div>
        </div>
    </form>
</div>
    <script>
        function previewImages(event) {
        const files = event.target.files;
        const previewCard = document.getElementById("previewCard");
        previewCard.innerHTML = ""; // ì´ì „ ë¯¸ë¦¬ë³´ê¸° ì´ˆê¸°í™”

        Array.from(files).forEach(file => {
        const reader = new FileReader();
        reader.onload = function(e) {
        const img = document.createElement("img");
        img.src = e.target.result;
        img.className = "img-fluid rounded m-1";
        img.style.maxWidth = "200px";
        previewCard.appendChild(img);
    };
        reader.readAsDataURL(file);
    });
    }
</script>
</body>
</html>
